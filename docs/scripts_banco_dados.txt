CREATE DATABASE 'localhost:C:\ProjetosPaulo\ProjetoControleNegociacao\data\PROJETODELPHI.FDB.fdb'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 8192 DEFAULT CHARACTER SET UTF8;

CONNECT "C:\ProjetosPaulo\ProjetoControleNegociacao\data\PROJETODELPHI.FDB"
user 'SYSDBA' password 'masterkey';




CREATE GENERATOR GEN_CODPRODUTO;

CREATE TABLE TBL_PRODUTO (
  CODPRODUTO INTEGER NOT NULL,
  NOMEPRODUTO VARCHAR(100) NOT NULL,
  PRECOVENDAPRODUTO NUMERIC(15,2) NOT NULL,
  CONSTRAINT PK_TBL_PRODUTO PRIMARY KEY (CODPRODUTO)
);


CREATE GENERATOR GEN_CODDISTRIBUIDOR;

CREATE TABLE TBL_DISTRIBUIDOR (
  CODDISTRIBUIDOR INTEGER NOT NULL,
  NOMEDISTRIBUIDOR VARCHAR(100) NOT NULL,
  CNPJ VARCHAR(14) NOT NULL,
  CONSTRAINT PK_TBL_DISTRIBUIDOR PRIMARY KEY (CODDISTRIBUIDOR)
);

CREATE GENERATOR GEN_CODPRODUTOR;

CREATE TABLE TBL_PRODUTOR(
  CODPRODUTOR INTEGER NOT NULL, 
  NOMEPRODUTOR VARCHAR(100) NOT NULL,   
  CPF_CNPJ VARCHAR(14) NOT NULL,
  CONSTRAINT PK_TBL_PRODUTOR PRIMARY KEY (CODPRODUTOR)
);  

CREATE TABLE TBL_LIMITE_CREDITO(
  CODPRODUTOR INTEGER NOT NULL,  
  CODDISTRIBUIDOR INTEGER NOT NULL,  
  LIMITE_CREDITO NUMERIC(15,2) NOT NULL,
  CONSTRAINT PK_TBL_LIMITE_CREDITO PRIMARY KEY (CODPRODUTOR,CODDISTRIBUIDOR)  
  );


ALTER TABLE TBL_LIMITE_CREDITO ADD CONSTRAINT FK_TBL_PRODUTOR FOREIGN KEY (CODPRODUTOR) REFERENCES TBL_PRODUTOR(CODPRODUTOR);

ALTER TABLE TBL_LIMITE_CREDITO ADD CONSTRAINT FK_TBL_DISTRIBUIDOR FOREIGN KEY (CODDISTRIBUIDOR) REFERENCES TBL_DISTRIBUIDOR(CODDISTRIBUIDOR);




// INSERT INTO TBL_PRODUTO(CODPRODUTO, NOMEPRODUTO, PRECOVENDAPRODUTO) VALUES(1,'ADUBO PARA CAPIM', 200);
// INSERT INTO TBL_PRODUTO(CODPRODUTO, NOMEPRODUTO, PRECOVENDAPRODUTO) VALUES(2,'DEFENSIVO PARA CAPIM', 180);

//INSERT INTO TBL_DISTRIBUIDOR(CODDISTRIBUIDOR, NOMEDISTRIBUIDOR, CNPJ) VALUES(1,'PAULO DISTRIBUIDOR', '12345678901234');
//INSERT INTO TBL_DISTRIBUIDOR(CODDISTRIBUIDOR, NOMEDISTRIBUIDOR, CNPJ) VALUES(2,'PAULO DISTRIBUIDOR 2', '12345678901234');

//INSERT INTO TBL_LIMITE_CREDITO(CODPRODUTOR,CODDISTRIBUIDOR,LIMITE_CREDITO) VALUES(1,1,1000);



SELECT * FROM TBL_PRODUTOR; (1,2)
SELECT * FROM TBL_DISTRIBUIDOR; (1,2)



SELECT L.CODPRODUTOR, P.NOMEPRODUTOR, L.CODDISTRIBUIDOR, D.NOMEDISTRIBUIDOR, L.LIMITE_CREDITO 
FROM TBL_LIMITE_CREDITO L
INNER JOIN TBL_PRODUTOR P     ON L.CODPRODUTOR     = P.CODPRODUTOR
INNER JOIN TBL_DISTRIBUIDOR D ON L.CODDISTRIBUIDOR = D.CODDISTRIBUIDOR;


https://www.tiktok.com/@jadilinda














-------------------------------------------------------------------------------------------------




https://github.com/SiagriERPs/desafio_delphi_03

* * CADASTROS * * 
TBL_PRODUTOR(CODPRODUTOR, NOMEPRODUTOR, CPF_CNPJ_PRODUTOR)
TBL_LIMITE_CREDITO_PRODUTOR(CODPRODUTOR, CODDISTRIBUIDOR, LIMITE_CREDITO)
TBL_DISTRIBUIDOR(CODDISTRIBUIDOR, NOMEDISTRIBUIDOR, CNPJ)
TBL_PRODUTO(CODPRODUTO, NOMEPRODUTO, PRECOVENDAPRODUTO)

* * NEGOCIAÇÃO * * 
TBL_NEGOCIACAO(IDNEGOCIACAO,CODPRODUTOR, CODDISTRIBUIDOR, STATUS)
TBL_NEGOCIACAO_ITENS(IDNEGOCIACAO, CODPRODUTO)





3 TELAS DE CADASTRO (PRODUTOR, DISTRIBUIDOR, PRODUTO)
1 TELA DE NEGOCIAÇÃO 
1 RELATORIO DE NEGOCIACAO